<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1050" height="624.46"><rect width="1050" height="624.46" rx="5" ry="5" class="a"/><svg y="0%" x="0%"><circle cx="20" cy="20" r="6" fill="#ff5f58"/><circle cx="40" cy="20" r="6" fill="#ffbd2e"/><circle cx="60" cy="20" r="6" fill="#18c132"/></svg><svg height="564.46" viewBox="0 0 101 56.446" width="1010" x="15" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" y="50"><style>@keyframes l{0%{transform:translateX(0)}3.9%{transform:translateX(-101px)}7%{transform:translateX(-404px)}10.6%{transform:translateX(-505px)}12.4%{transform:translateX(-606px)}13%{transform:translateX(-707px)}13.9%{transform:translateX(-808px)}15.8%{transform:translateX(-909px)}16.8%{transform:translateX(-1010px)}17.3%{transform:translateX(-1111px)}19%{transform:translateX(-1212px)}19.9%{transform:translateX(-1313px)}20.9%{transform:translateX(-1414px)}21.3%{transform:translateX(-1515px)}22.6%{transform:translateX(-1616px)}23.7%{transform:translateX(-1717px)}24.9%{transform:translateX(-1818px)}26.5%{transform:translateX(-1919px)}27.3%{transform:translateX(-2020px)}28.9%{transform:translateX(-2121px)}30.2%{transform:translateX(-2222px)}31.7%{transform:translateX(-2323px)}32.9%{transform:translateX(-2424px)}33.5%{transform:translateX(-2525px)}34.4%{transform:translateX(-2626px)}35.1%{transform:translateX(-2727px)}38.3%{transform:translateX(-3030px)}42.5%{transform:translateX(-3333px)}52.8%{transform:translateX(-3535px)}57.2%{transform:translateX(-4747px)}57.3%{transform:translateX(-5656px)}59.1%{transform:translateX(-5858px)}to{transform:translateX(-5959px)}}.a{fill:#282d35}.f{fill:#d290e4;white-space:pre}.g{fill:#b9c0cb}.g,.h,.i{white-space:pre}.h{fill:#66c2cd;font-weight:700}.i{fill:#b9bfca}</style><g font-family="Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace" font-size="1.67"><defs><symbol id="46"><text x="14.028" y="1.67" class="g">-</text><text x="16.032" y="1.67" class="g">&quot;&quot;</text></symbol><symbol id="1"><text y="1.67" class="f">[app-pkg]</text></symbol><symbol id="3"><text y="1.67" class="f">[app-pkg]</text><text x="10.02" y="1.67" class="g">ecs-preview</text><text x="93.186" y="1.67" class="f">master</text></symbol><symbol id="4"><text y="1.67" class="f">[app-pkg]</text><text x="10.02" y="1.67" class="g">ecs-preview</text><text x="22.044" y="1.67" class="g">app</text><text x="93.186" y="1.67" class="f">master</text></symbol><symbol id="5"><text y="1.67" class="f">[app-pkg]</text><text x="10.02" y="1.67" class="g">ecs-preview</text><text x="22.044" y="1.67" class="g">app</text><text x="26.052" y="1.67" class="g">package</text><text x="93.186" y="1.67" class="f">master</text></symbol><symbol id="6"><text y="1.67" class="h">?</text><text x="2.004" y="1.67" class="g">Which</text><text x="8.016" y="1.67" class="g">environment</text><text x="20.04" y="1.67" class="g">would</text><text x="26.052" y="1.67" class="g">you</text><text x="30.06" y="1.67" class="g">like</text><text x="35.07" y="1.67" class="g">to</text><text x="38.076" y="1.67" class="g">create</text><text x="45.09" y="1.67" class="g">this</text><text x="50.1" y="1.67" class="g">stack</text><text x="56.112" y="1.67" class="g">for?</text><text x="62.124" y="1.67" class="i">[Use</text><text x="67.134" y="1.67" class="i">arrows</text><text x="74.148" y="1.67" class="i">to</text><text x="77.154" y="1.67" class="i">move,</text><text x="83.166" y="1.67" class="i">type</text><text x="88.176" y="1.67" class="i">to</text><text x="91.182" y="1.67" class="i">filter]</text></symbol><symbol id="7"><text y="1.67" class="h">&gt;</text><text x="2.004" y="1.67" class="h">test</text></symbol><symbol id="8"><text x="2.004" y="1.67" class="g">prod</text></symbol><symbol id="9"><text x="4.008" y="1.67" class="g">Type:</text><text x="10.02" y="1.67" class="g">String</text></symbol><symbol id="10"><text x="4.008" y="1.67" class="g">Type:</text><text x="10.02" y="1.67" class="g">Number</text></symbol><symbol id="11"><text x="4.008" y="1.67" class="g">Properties:</text></symbol><symbol id="12"><text x="6.012" y="1.67" class="g">Cpu:</text><text x="11.022" y="1.67" class="g">!Ref</text><text x="16.032" y="1.67" class="g">TaskCPU</text></symbol><symbol id="13"><text x="4.008" y="1.67" class="g">Type:</text><text x="10.02" y="1.67" class="g">AWS::IAM::Role</text></symbol><symbol id="14"><text x="6.012" y="1.67" class="g">AssumeRolePolicyDocument:</text></symbol><symbol id="15"><text x="8.016" y="1.67" class="g">Statement:</text></symbol><symbol id="16"><text x="10.02" y="1.67" class="g">-</text><text x="12.024" y="1.67" class="g">Effect:</text><text x="20.04" y="1.67" class="g">Allow</text></symbol><symbol id="17"><text x="12.024" y="1.67" class="g">Principal:</text></symbol><symbol id="18"><text x="14.028" y="1.67" class="g">Service:</text><text x="23.046" y="1.67" class="g">ecs-tasks.amazonaws.com</text></symbol><symbol id="19"><text x="12.024" y="1.67" class="g">Action:</text><text x="20.04" y="1.67" class="g">&apos;sts:AssumeRole&apos;</text></symbol><symbol id="20"><text x="6.012" y="1.67" class="g">Policies:</text></symbol><symbol id="21"><text x="10.02" y="1.67" class="g">PolicyDocument:</text></symbol><symbol id="22"><text x="12.024" y="1.67" class="g">Version:</text><text x="21.042" y="1.67" class="g">&apos;2012-10-17&apos;</text></symbol><symbol id="23"><text x="12.024" y="1.67" class="g">Statement:</text></symbol><symbol id="24"><text x="14.028" y="1.67" class="g">-</text><text x="16.032" y="1.67" class="g">Effect:</text><text x="24.048" y="1.67" class="g">&apos;Allow&apos;</text></symbol><symbol id="25"><text x="16.032" y="1.67" class="g">Action:</text></symbol><symbol id="26"><text x="16.032" y="1.67" class="g">Resource:</text></symbol><symbol id="27"><text x="16.032" y="1.67" class="g">Resource:</text><text x="26.052" y="1.67" class="g">&apos;*&apos;</text></symbol><symbol id="28"><text x="16.032" y="1.67" class="g">Action:</text><text x="24.048" y="1.67" class="g">&apos;sts:AssumeRole&apos;</text></symbol><symbol id="29"><text x="18.036" y="1.67" class="g">-</text><text x="20.04" y="1.67" class="g">!Sub</text><text x="25.05" y="1.67" class="g">&apos;arn:aws:iam::${AWS::AccountId}:role/*&apos;</text></symbol><symbol id="30"><text x="16.032" y="1.67" class="g">Condition:</text></symbol><symbol id="31"><text x="18.036" y="1.67" class="g">StringEquals:</text></symbol><symbol id="32"><text x="20.04" y="1.67" class="g">&apos;iam:ResourceTag/ecs-project&apos;:</text><text x="51.102" y="1.67" class="g">!Sub</text><text x="56.112" y="1.67" class="g">&apos;${ProjectName}&apos;</text></symbol><symbol id="33"><text x="16.032" y="1.67" class="g">Action:</text><text x="24.048" y="1.67" class="g">&apos;*&apos;</text></symbol><symbol id="34"><text y="1.67" class="g">e}-*&apos;</text></symbol><symbol id="35"><text x="18.036" y="1.67" class="g">-</text><text x="20.04" y="1.67" class="g">!Sub</text><text x="25.05" y="1.67" class="g">&apos;arn:aws:rds:${AWS::Region}:${AWS::AccountId}:*:${ProjectName}-${EnvName}-*&apos;</text></symbol><symbol id="36"><text x="18.036" y="1.67" class="g">-</text><text x="20.04" y="1.67" class="g">!Sub</text><text x="25.05" y="1.67" class="g">&apos;arn:aws:es:${AWS::Region}:${AWS::AccountId}:*/${ProjectName}-${EnvName}-*&apos;</text></symbol><symbol id="37"><text x="18.036" y="1.67" class="g">-</text><text x="20.04" y="1.67" class="g">!Sub</text><text x="25.05" y="1.67" class="g">&apos;arn:aws:sns:${AWS::Region}:${AWS::AccountId}:${ProjectName}-${EnvName}-*&apos;</text></symbol><symbol id="38"><text x="8.016" y="1.67" class="g">Fn::ImportValue:</text></symbol><symbol id="39"><text x="12.024" y="1.67" class="g">-</text><text x="14.028" y="1.67" class="g">Fn::Select:</text></symbol><symbol id="40"><text x="14.028" y="1.67" class="g">-</text><text x="16.032" y="1.67" class="g">Fn::Split:</text></symbol><symbol id="41"><text x="16.032" y="1.67" class="g">-</text><text x="18.036" y="1.67" class="g">&apos;,&apos;</text></symbol><symbol id="42"><text x="16.032" y="1.67" class="g">-</text><text x="18.036" y="1.67" class="g">Fn::ImportValue:</text><text x="35.07" y="1.67" class="g">!Sub</text><text x="40.08" y="1.67" class="g">&apos;${ProjectName}-${EnvName}-PublicSubnets&apos;</text></symbol><symbol id="43"><text x="4.008" y="1.67" class="g">Condition:</text><text x="15.03" y="1.67" class="g">HTTPSLoadBalancer</text></symbol><symbol id="44"><text x="14.028" y="1.67" class="g">-</text><text x="16.032" y="1.67" class="g">Fn::ImportValue:</text></symbol><symbol id="45"><text x="18.036" y="1.67" class="g">!Sub</text><text x="23.046" y="1.67" class="g">&quot;${ProjectName}-${EnvName}-SubDomain&quot;</text></symbol><symbol id="2"><text y="1.67" class="f">[app-pkg]</text><text x="93.186" y="1.67" class="f">master</text></symbol><symbol id="47"><text x="8.016" y="1.67" class="g">Type:</text><text x="14.028" y="1.67" class="g">A</text></symbol><symbol id="48"><text x="8.016" y="1.67" class="g">AliasTarget:</text></symbol><symbol id="49"><text x="10.02" y="1.67" class="g">HostedZoneId:</text></symbol><symbol id="50"><text x="12.024" y="1.67" class="g">Fn::ImportValue:</text></symbol><symbol id="51"><text x="14.028" y="1.67" class="g">!Sub</text><text x="19.038" y="1.67" class="g">&quot;${ProjectName}-${EnvName}-CanonicalHostedZoneID&quot;</text></symbol><symbol id="52"><text x="10.02" y="1.67" class="g">DNSName:</text></symbol><symbol id="53"><text x="10.02" y="1.67" class="g">&apos;use</text><text x="15.03" y="1.67" class="g">strict&apos;;const</text><text x="29.058" y="1.67" class="g">aws=require(&quot;aws-sdk&quot;),priorityForRootRule=&quot;50000&quot;;let</text><text x="84.168" y="1.67" class="g">defaultResponseUR</text></symbol><symbol id="54"><text y="1.67" class="g">L,report=function(a,b,c,d,e,f){return</text><text x="38.076" y="1.67" class="g">new</text><text x="42.084" y="1.67" class="g">Promise((g,h)=&gt;{const</text><text x="64.128" y="1.67" class="g">i=require(&quot;https&quot;),{URL:j}=require(&quot;u</text></symbol><symbol id="55"><text y="1.67" class="g">rl&quot;);var</text><text x="9.018" y="1.67" class="g">k=JSON.stringify({Status:c,Reason:f,PhysicalResourceId:d||b.logStreamName,StackId:a.StackId,</text></symbol><symbol id="56"><text y="1.67" class="g">RequestId:a.RequestId,LogicalResourceId:a.LogicalResourceId,Data:e});const</text><text x="75.15" y="1.67" class="g">l=new</text><text x="81.162" y="1.67" class="g">j(a.ResponseURL||def</text></symbol><symbol id="57"><text y="1.67" class="g">aultResponseURL),m={hostname:l.hostname,port:443,path:l.pathname+l.search,method:&quot;PUT&quot;,headers:{&quot;Cont</text></symbol><symbol id="58"><text y="1.67" class="g">ent-Type&quot;:&quot;&quot;,&quot;Content-Length&quot;:k.length}};i.request(m).on(&quot;error&quot;,h).on(&quot;response&quot;,a=&gt;{a.resume(),400&lt;</text></symbol><symbol id="59"><text y="1.67" class="g">=a.statusCode?h(new</text><text x="20.04" y="1.67" class="g">Error(`Error</text><text x="33.066" y="1.67" class="g">${a.statusCode}:</text><text x="50.1" y="1.67" class="g">${a.statusMessage}`)):g()}).end(k,&quot;utf8&quot;)})};const</text></symbol><symbol id="60"><text y="1.67" class="g">calculateNextRulePriority=async</text><text x="32.064" y="1.67" class="g">function(a){var</text><text x="48.096" y="1.67" class="g">b,c=new</text><text x="56.112" y="1.67" class="g">aws.ELBv2,d=[];do{const</text><text x="80.16" y="1.67" class="g">e=await</text><text x="88.176" y="1.67" class="g">c.describeRul</text></symbol><symbol id="61"><text x="4.008" y="1.67" class="g">Type:</text><text x="10.02" y="1.67" class="g">Custom::RulePriorityFunction</text></symbol><symbol id="62"><text x="6.012" y="1.67" class="g">ServiceToken:</text><text x="20.04" y="1.67" class="g">!GetAtt</text><text x="28.056" y="1.67" class="g">RulePriorityFunction.Arn</text></symbol><symbol id="63"><text x="6.012" y="1.67" class="g">ListenerArn:</text></symbol><symbol id="64"><text x="10.02" y="1.67" class="g">!Sub</text><text x="15.03" y="1.67" class="g">&quot;${ProjectName}-${EnvName}-HTTPSListenerArn&quot;</text></symbol><symbol id="65"><text x="4.008" y="1.67" class="g">Type:</text><text x="10.02" y="1.67" class="g">AWS::ElasticLoadBalancingV2::ListenerRule</text></symbol><symbol id="66"><text x="4.008" y="1.67" class="g">Condition:</text><text x="15.03" y="1.67" class="g">HTTPLoadBalancer</text></symbol><symbol id="67"><text x="10.02" y="1.67" class="g">!Sub</text><text x="15.03" y="1.67" class="g">&quot;${ProjectName}-${EnvName}-HTTPListenerArn&quot;</text></symbol><symbol id="68"><text x="16.032" y="1.67" class="g">-</text></symbol><symbol id="69"><text x="4.008" y="1.67" class="g">Type:</text><text x="10.02" y="1.67" class="g">AWS::CloudFormation::WaitConditionHandle</text></symbol><symbol id="70"><text x="2.004" y="1.67" class="g">HTTPWaitHandle:</text></symbol><symbol id="71"><text x="4.008" y="1.67" class="g">DependsOn:</text><text x="15.03" y="1.67" class="g">HTTPListenerRule</text></symbol><symbol id="72"><text x="2.004" y="1.67" class="g">#</text><text x="4.008" y="1.67" class="g">We</text><text x="7.014" y="1.67" class="g">don&apos;t</text><text x="13.026" y="1.67" class="g">actually</text><text x="22.044" y="1.67" class="g">need</text><text x="27.054" y="1.67" class="g">to</text><text x="30.06" y="1.67" class="g">wait</text><text x="35.07" y="1.67" class="g">for</text><text x="39.078" y="1.67" class="g">the</text><text x="43.086" y="1.67" class="g">condition</text><text x="53.106" y="1.67" class="g">to</text></symbol><symbol id="73"><text x="2.004" y="1.67" class="g">#</text><text x="4.008" y="1.67" class="g">be</text><text x="7.014" y="1.67" class="g">completed,</text><text x="18.036" y="1.67" class="g">that&apos;s</text><text x="25.05" y="1.67" class="g">why</text><text x="29.058" y="1.67" class="g">we</text><text x="32.064" y="1.67" class="g">set</text><text x="36.072" y="1.67" class="g">a</text><text x="38.076" y="1.67" class="g">count</text><text x="44.088" y="1.67" class="g">of</text><text x="47.094" y="1.67" class="g">0.</text><text x="50.1" y="1.67" class="g">The</text><text x="54.108" y="1.67" class="g">timeout</text></symbol><symbol id="74"><text x="2.004" y="1.67" class="g">#</text><text x="4.008" y="1.67" class="g">is</text><text x="7.014" y="1.67" class="g">a</text><text x="9.018" y="1.67" class="g">required</text><text x="18.036" y="1.67" class="g">field,</text><text x="25.05" y="1.67" class="g">but</text><text x="29.058" y="1.67" class="g">useless,</text><text x="38.076" y="1.67" class="g">so</text><text x="41.082" y="1.67" class="g">we</text><text x="44.088" y="1.67" class="g">set</text><text x="48.096" y="1.67" class="g">it</text><text x="51.102" y="1.67" class="g">to</text><text x="54.108" y="1.67" class="g">one.</text></symbol><symbol id="75"><text x="2.004" y="1.67" class="g">WaitUntilListenerRuleIsCreated:</text></symbol><symbol id="76"><text x="4.008" y="1.67" class="g">Type:</text><text x="10.02" y="1.67" class="g">AWS::CloudFormation::WaitCondition</text></symbol><symbol id="77"><text x="6.012" y="1.67" class="g">Handle:</text><text x="14.028" y="1.67" class="g">!If</text><text x="18.036" y="1.67" class="g">[HTTPLoadBalancer,</text><text x="37.074" y="1.67" class="g">!Ref</text><text x="42.084" y="1.67" class="g">HTTPWaitHandle,</text><text x="58.116" y="1.67" class="g">!Ref</text><text x="63.126" y="1.67" class="g">HTTPSWaitHandle]</text></symbol><symbol id="78"><text x="6.012" y="1.67" class="g">Timeout:</text><text x="15.03" y="1.67" class="g">&quot;1&quot;</text></symbol><symbol id="79"><text x="6.012" y="1.67" class="g">Count:</text><text x="13.026" y="1.67" class="g">0</text></symbol><symbol id="80"><text x="2.004" y="1.67" class="g">AddonsStack:</text></symbol><symbol id="81"><text x="4.008" y="1.67" class="g">Type:</text><text x="10.02" y="1.67" class="g">AWS::CloudFormation::Stack</text></symbol><symbol id="82"><text x="4.008" y="1.67" class="g">Condition:</text><text x="15.03" y="1.67" class="g">HasAddons</text></symbol><symbol id="83"><text x="6.012" y="1.67" class="g">Parameters:</text></symbol><symbol id="84"><text x="8.016" y="1.67" class="g">Project:</text><text x="17.034" y="1.67" class="g">!Ref</text><text x="22.044" y="1.67" class="g">ProjectName</text></symbol><symbol id="85"><text x="8.016" y="1.67" class="g">Env:</text><text x="13.026" y="1.67" class="g">!Ref</text><text x="18.036" y="1.67" class="g">EnvName</text></symbol><symbol id="86"><text x="8.016" y="1.67" class="g">App:</text><text x="13.026" y="1.67" class="g">!Ref</text><text x="18.036" y="1.67" class="g">AppName</text></symbol><symbol id="87"><text x="6.012" y="1.67" class="g">TemplateURL:</text></symbol><symbol id="88"><text x="8.016" y="1.67" class="g">!Ref</text><text x="13.026" y="1.67" class="g">AddonsTemplateURL</text></symbol><symbol id="a"><path fill="transparent" d="M0 0h101v26H0z"/></symbol><symbol id="b"><path fill="#6f7683" d="M0 0h1.102v2.171H0z"/></symbol></defs><path class="a" d="M0 0h101v56.446H0z"/><g style="animation-duration:11.29575s;animation-iteration-count:infinite;animation-name:l;animation-timing-function:steps(1,end)"><svg width="6060"><svg><use xlink:href="#a"/><use xlink:href="#b" x="-.004"/></svg><svg x="101"><use xlink:href="#a"/><use xlink:href="#b" x="-.004"/></svg><svg x="202"><use xlink:href="#a"/><use xlink:href="#b" x="9.996"/><use xlink:href="#1"/></svg><svg x="303"><use xlink:href="#a"/><use xlink:href="#b" x="9.996"/><use xlink:href="#2"/></svg><svg x="404"><use xlink:href="#a"/><use xlink:href="#b" x="9.996"/><use xlink:href="#2"/></svg><svg x="505"><use xlink:href="#a"/><use xlink:href="#b" x="10.996"/><text y="1.67" class="f">[app-pkg]</text><text x="10.02" y="1.67" class="g">e</text><text x="93.186" y="1.67" class="f">master</text></svg><svg x="606"><use xlink:href="#a"/><use xlink:href="#b" x="11.996"/><text y="1.67" class="f">[app-pkg]</text><text x="10.02" y="1.67" class="g">ec</text><text x="93.186" y="1.67" class="f">master</text></svg><svg x="707"><use xlink:href="#a"/><use xlink:href="#b" x="12.996"/><text y="1.67" class="f">[app-pkg]</text><text x="10.02" y="1.67" class="g">ecs</text><text x="93.186" y="1.67" class="f">master</text></svg><svg x="808"><use xlink:href="#a"/><use xlink:href="#b" x="13.996"/><text y="1.67" class="f">[app-pkg]</text><text x="10.02" y="1.67" class="g">ecs-</text><text x="93.186" y="1.67" class="f">master</text></svg><svg x="909"><use xlink:href="#a"/><use xlink:href="#b" x="14.996"/><text y="1.67" class="f">[app-pkg]</text><text x="10.02" y="1.67" class="g">ecs-p</text><text x="93.186" y="1.67" class="f">master</text></svg><svg x="1010"><use xlink:href="#a"/><use xlink:href="#b" x="15.996"/><text y="1.67" class="f">[app-pkg]</text><text x="10.02" y="1.67" class="g">ecs-pr</text><text x="93.186" y="1.67" class="f">master</text></svg><svg x="1111"><use xlink:href="#a"/><use xlink:href="#b" x="16.996"/><text y="1.67" class="f">[app-pkg]</text><text x="10.02" y="1.67" class="g">ecs-pre</text><text x="93.186" y="1.67" class="f">master</text></svg><svg x="1212"><use xlink:href="#a"/><use xlink:href="#b" x="17.996"/><text y="1.67" class="f">[app-pkg]</text><text x="10.02" y="1.67" class="g">ecs-prev</text><text x="93.186" y="1.67" class="f">master</text></svg><svg x="1313"><use xlink:href="#a"/><use xlink:href="#b" x="18.996"/><text y="1.67" class="f">[app-pkg]</text><text x="10.02" y="1.67" class="g">ecs-previ</text><text x="93.186" y="1.67" class="f">master</text></svg><svg x="1414"><use xlink:href="#a"/><use xlink:href="#b" x="19.996"/><text y="1.67" class="f">[app-pkg]</text><text x="10.02" y="1.67" class="g">ecs-previe</text><text x="93.186" y="1.67" class="f">master</text></svg><svg x="1515"><use xlink:href="#a"/><use xlink:href="#b" x="20.996"/><use xlink:href="#3"/></svg><svg x="1616"><use xlink:href="#a"/><use xlink:href="#b" x="21.996"/><use xlink:href="#3"/></svg><svg x="1717"><use xlink:href="#a"/><use xlink:href="#b" x="22.996"/><text y="1.67" class="f">[app-pkg]</text><text x="10.02" y="1.67" class="g">ecs-preview</text><text x="22.044" y="1.67" class="g">a</text><text x="93.186" y="1.67" class="f">master</text></svg><svg x="1818"><use xlink:href="#a"/><use xlink:href="#b" x="23.996"/><text y="1.67" class="f">[app-pkg]</text><text x="10.02" y="1.67" class="g">ecs-preview</text><text x="22.044" y="1.67" class="g">ap</text><text x="93.186" y="1.67" class="f">master</text></svg><svg x="1919"><use xlink:href="#a"/><use xlink:href="#b" x="24.996"/><use xlink:href="#4"/></svg><svg x="2020"><use xlink:href="#a"/><use xlink:href="#b" x="25.996"/><use xlink:href="#4"/></svg><svg x="2121"><use xlink:href="#a"/><use xlink:href="#b" x="26.996"/><text y="1.67" class="f">[app-pkg]</text><text x="10.02" y="1.67" class="g">ecs-preview</text><text x="22.044" y="1.67" class="g">app</text><text x="26.052" y="1.67" class="g">p</text><text x="93.186" y="1.67" class="f">master</text></svg><svg x="2222"><use xlink:href="#a"/><use xlink:href="#b" x="27.996"/><text y="1.67" class="f">[app-pkg]</text><text x="10.02" y="1.67" class="g">ecs-preview</text><text x="22.044" y="1.67" class="g">app</text><text x="26.052" y="1.67" class="g">pa</text><text x="93.186" y="1.67" class="f">master</text></svg><svg x="2323"><use xlink:href="#a"/><use xlink:href="#b" x="28.996"/><text y="1.67" class="f">[app-pkg]</text><text x="10.02" y="1.67" class="g">ecs-preview</text><text x="22.044" y="1.67" class="g">app</text><text x="26.052" y="1.67" class="g">pac</text><text x="93.186" y="1.67" class="f">master</text></svg><svg x="2424"><use xlink:href="#a"/><use xlink:href="#b" x="29.996"/><text y="1.67" class="f">[app-pkg]</text><text x="10.02" y="1.67" class="g">ecs-preview</text><text x="22.044" y="1.67" class="g">app</text><text x="26.052" y="1.67" class="g">pack</text><text x="93.186" y="1.67" class="f">master</text></svg><svg x="2525"><use xlink:href="#a"/><use xlink:href="#b" x="30.996"/><text y="1.67" class="f">[app-pkg]</text><text x="10.02" y="1.67" class="g">ecs-preview</text><text x="22.044" y="1.67" class="g">app</text><text x="26.052" y="1.67" class="g">packa</text><text x="93.186" y="1.67" class="f">master</text></svg><svg x="2626"><use xlink:href="#a"/><use xlink:href="#b" x="31.996"/><text y="1.67" class="f">[app-pkg]</text><text x="10.02" y="1.67" class="g">ecs-preview</text><text x="22.044" y="1.67" class="g">app</text><text x="26.052" y="1.67" class="g">packag</text><text x="93.186" y="1.67" class="f">master</text></svg><svg x="2727"><use xlink:href="#a"/><use xlink:href="#b" x="32.996"/><use xlink:href="#5"/></svg><svg x="2828"><use xlink:href="#a"/><use xlink:href="#b" x="32.996"/><use xlink:href="#5"/></svg><svg x="2929"><use xlink:href="#a"/><use xlink:href="#b" x="-.004" y="2.146"/><use xlink:href="#5"/></svg><svg x="3030"><use xlink:href="#a"/><use xlink:href="#b" x="-.004" y="2.146"/><use xlink:href="#5"/></svg><svg x="3131"><use xlink:href="#a"/><use xlink:href="#b" x="-.004" y="2.146"/><use xlink:href="#5"/></svg><svg x="3232"><use xlink:href="#a"/><use xlink:href="#b" x="-.004" y="10.83"/><use xlink:href="#5"/><use xlink:href="#6" y="4.342"/><use xlink:href="#7" y="6.513"/><use xlink:href="#8" y="8.684"/></svg><svg x="3333"><use xlink:href="#a"/><use xlink:href="#5"/><use xlink:href="#6" y="4.342"/><use xlink:href="#7" y="6.513"/><use xlink:href="#8" y="8.684"/></svg><svg x="3434"><use xlink:href="#a"/><use xlink:href="#b" x="-.004" y="10.83"/><use xlink:href="#5"/><use xlink:href="#6" y="4.342"/><use xlink:href="#7" y="6.513"/><use xlink:href="#8" y="8.684"/></svg><svg x="3535"><use xlink:href="#a"/><use xlink:href="#b" x="-.004" y="6.488"/><use xlink:href="#5"/><text y="6.012" class="h">?</text><text x="2.004" y="6.012" class="g">Which</text><text x="8.016" y="6.012" class="g">environment</text><text x="20.04" y="6.012" class="g">would</text><text x="26.052" y="6.012" class="g">you</text><text x="30.06" y="6.012" class="g">like</text><text x="35.07" y="6.012" class="g">to</text><text x="38.076" y="6.012" class="g">create</text><text x="45.09" y="6.012" class="g">this</text><text x="50.1" y="6.012" class="g">stack</text><text x="56.112" y="6.012" class="g">for?</text><text x="61.122" y="6.012" style="white-space:pre" fill="#66c2cd">test</text></svg><svg x="3636"><use xlink:href="#a"/><use xlink:href="#b" x="78.996" y="54.25"/><use xlink:href="#9"/><text x="4.008" y="3.841" class="g">Default:</text><text x="13.026" y="3.841" class="g">713517298797.dkr.ecr.us-west-2.amazonaws.com/kudos/api:b26dd49</text><text x="2.004" y="6.012" class="g">ContainerPort:</text><use xlink:href="#10" y="6.513"/><text x="4.008" y="10.354" class="g">Default:</text><text x="13.026" y="10.354" class="g">80</text><text x="2.004" y="12.525" class="g">RulePath:</text><use xlink:href="#9" y="13.026"/><text x="4.008" y="16.867" class="g">Default:</text><text x="13.026" y="16.867" class="g">&apos;api&apos;</text><text x="2.004" y="19.038" class="g">TaskCPU:</text><use xlink:href="#9" y="19.539"/><text x="4.008" y="23.38" class="g">Default:</text><text x="13.026" y="23.38" class="g">&apos;256&apos;</text><text x="2.004" y="25.551" class="g">TaskMemory:</text><use xlink:href="#9" y="26.052"/><text x="4.008" y="29.893" class="g">Default:</text><text x="13.026" y="29.893" class="g">&apos;512&apos;</text><text x="2.004" y="32.064" class="g">TaskCount:</text><use xlink:href="#10" y="32.565"/><text x="4.008" y="36.406" class="g">Default:</text><text x="13.026" y="36.406" class="g">1</text><text x="2.004" y="38.577" class="g">HTTPSEnabled:</text><use xlink:href="#9" y="39.078"/><text x="4.008" y="42.919" class="g">AllowedValues:</text><text x="19.038" y="42.919" class="g">[true,</text><text x="26.052" y="42.919" class="g">false]</text><text x="4.008" y="45.09" class="g">Default:</text><text x="13.026" y="45.09" class="g">&apos;false&apos;</text><text x="2.004" y="47.261" class="g">LogRetention:</text><use xlink:href="#10" y="47.762"/><text x="4.008" y="51.603" class="g">Default:</text><text x="13.026" y="51.603" class="g">30</text><text x="2.004" y="53.774" class="g">AddonsTemplateURL:</text><text x="4.008" y="55.945" class="g">Description:</text><text x="17.034" y="55.945" class="g">&apos;URL</text><text x="22.044" y="55.945" class="g">of</text><text x="25.05" y="55.945" class="g">the</text><text x="29.058" y="55.945" class="g">addons</text><text x="36.072" y="55.945" class="g">nested</text><text x="43.086" y="55.945" class="g">stack</text><text x="49.098" y="55.945" class="g">template</text><text x="58.116" y="55.945" class="g">within</text><text x="65.13" y="55.945" class="g">the</text><text x="69.138" y="55.945" class="g">S3</text><text x="72.144" y="55.945" class="g">bucket.</text></svg><svg x="3737"><use xlink:href="#a"/><use xlink:href="#b" x="24.996" y="54.25"/><text x="2.004" y="1.67" class="g">HTTPLoadBalancer:</text><text x="4.008" y="3.841" class="g">!Not</text><text x="6.012" y="6.012" class="g">-</text><text x="8.016" y="6.012" class="g">!Condition</text><text x="19.038" y="6.012" class="g">HTTPSLoadBalancer</text><text x="2.004" y="8.183" class="g">HTTPSLoadBalancer:</text><text x="4.008" y="10.354" class="g">!Equals</text><text x="12.024" y="10.354" class="g">[!Ref</text><text x="18.036" y="10.354" class="g">HTTPSEnabled,</text><text x="32.064" y="10.354" class="g">true]</text><text x="2.004" y="12.525" class="g">HasAddons:</text><text x="13.026" y="12.525" class="g">#</text><text x="15.03" y="12.525" class="g">If</text><text x="18.036" y="12.525" class="g">a</text><text x="20.04" y="12.525" class="g">bucket</text><text x="27.054" y="12.525" class="g">URL</text><text x="31.062" y="12.525" class="g">is</text><text x="34.068" y="12.525" class="g">specified,</text><text x="45.09" y="12.525" class="g">that</text><text x="50.1" y="12.525" class="g">means</text><text x="56.112" y="12.525" class="g">the</text><text x="60.12" y="12.525" class="g">template</text><text x="69.138" y="12.525" class="g">exists.</text><text x="4.008" y="14.696" class="g">!Not</text><text x="9.018" y="14.696" class="g">[!Equals</text><text x="18.036" y="14.696" class="g">[!Ref</text><text x="24.048" y="14.696" class="g">AddonsTemplateURL,</text><text x="43.086" y="14.696" class="g">&quot;&quot;]]</text><text x="2.004" y="16.867" class="g">HTTPRootPath:</text><text x="16.032" y="16.867" class="g">#</text><text x="18.036" y="16.867" class="g">If</text><text x="21.042" y="16.867" class="g">we&apos;re</text><text x="27.054" y="16.867" class="g">using</text><text x="33.066" y="16.867" class="g">path</text><text x="38.076" y="16.867" class="g">based</text><text x="44.088" y="16.867" class="g">routing</text><text x="52.104" y="16.867" class="g">and</text><text x="56.112" y="16.867" class="g">use</text><text x="60.12" y="16.867" class="g">the</text><text x="64.128" y="16.867" class="g">root</text><text x="69.138" y="16.867" class="g">path,</text><text x="75.15" y="16.867" class="g">we</text><text x="78.156" y="16.867" class="g">have</text><text x="83.166" y="16.867" class="g">some</text><text x="88.176" y="16.867" class="g">special</text><text x="96.192" y="16.867" class="g">logic</text><text x="4.008" y="19.038" class="g">!Equals</text><text x="12.024" y="19.038" class="g">[!Ref</text><text x="18.036" y="19.038" class="g">RulePath,</text><text x="28.056" y="19.038" class="g">&quot;/&quot;]</text><text y="21.209" class="g">Resources:</text><text x="2.004" y="23.38" class="g">LogGroup:</text><text x="4.008" y="25.551" class="g">Type:</text><text x="10.02" y="25.551" class="g">AWS::Logs::LogGroup</text><use xlink:href="#11" y="26.052"/><text x="6.012" y="29.893" class="g">LogGroupName:</text><text x="20.04" y="29.893" class="g">!Join</text><text x="26.052" y="29.893" class="g">[&apos;&apos;,</text><text x="31.062" y="29.893" class="g">[/ecs/,</text><text x="39.078" y="29.893" class="g">!Ref</text><text x="44.088" y="29.893" class="g">ProjectName,</text><text x="57.114" y="29.893" class="g">&apos;-&apos;,</text><text x="62.124" y="29.893" class="g">!Ref</text><text x="67.134" y="29.893" class="g">EnvName,</text><text x="76.152" y="29.893" class="g">&apos;-&apos;,</text><text x="81.162" y="29.893" class="g">!Ref</text><text x="86.172" y="29.893" class="g">AppName]]</text><text x="6.012" y="32.064" class="g">RetentionInDays:</text><text x="23.046" y="32.064" class="g">!Ref</text><text x="28.056" y="32.064" class="g">LogRetention</text><text x="2.004" y="36.406" class="g">TaskDefinition:</text><text x="4.008" y="38.577" class="g">Type:</text><text x="10.02" y="38.577" class="g">AWS::ECS::TaskDefinition</text><text x="4.008" y="40.748" class="g">DependsOn:</text><text x="15.03" y="40.748" class="g">LogGroup</text><use xlink:href="#11" y="41.249"/><text x="6.012" y="45.09" class="g">Family:</text><text x="14.028" y="45.09" class="g">!Join</text><text x="20.04" y="45.09" class="g">[&apos;&apos;,</text><text x="25.05" y="45.09" class="g">[!Ref</text><text x="31.062" y="45.09" class="g">ProjectName,</text><text x="44.088" y="45.09" class="g">&apos;-&apos;,</text><text x="49.098" y="45.09" class="g">!Ref</text><text x="54.108" y="45.09" class="g">EnvName,</text><text x="63.126" y="45.09" class="g">&apos;-&apos;,</text><text x="68.136" y="45.09" class="g">!Ref</text><text x="73.146" y="45.09" class="g">AppName]]</text><text x="6.012" y="47.261" class="g">NetworkMode:</text><text x="19.038" y="47.261" class="g">awsvpc</text><text x="6.012" y="49.432" class="g">RequiresCompatibilities:</text><text x="8.016" y="51.603" class="g">-</text><text x="10.02" y="51.603" class="g">FARGATE</text><use xlink:href="#12" y="52.104"/><text x="6.012" y="55.945" class="g">Memory:</text><text x="14.028" y="55.945" class="g">!Ref</text><text x="19.038" y="55.945" class="g">TaskMe</text></svg><svg x="3838"><use xlink:href="#a"/><use xlink:href="#b" x="21.996" y="54.25"/><use xlink:href="#12"/><text x="6.012" y="3.841" class="g">Memory:</text><text x="14.028" y="3.841" class="g">!Ref</text><text x="19.038" y="3.841" class="g">TaskMemory</text><text x="6.012" y="6.012" class="g">ExecutionRoleArn:</text><text x="24.048" y="6.012" class="g">!Ref</text><text x="29.058" y="6.012" class="g">ExecutionRole</text><text x="6.012" y="8.183" class="g">TaskRoleArn:</text><text x="19.038" y="8.183" class="g">!Ref</text><text x="24.048" y="8.183" class="g">TaskRole</text><text x="6.012" y="10.354" class="g">ContainerDefinitions:</text><text x="8.016" y="12.525" class="g">-</text><text x="10.02" y="12.525" class="g">Name:</text><text x="16.032" y="12.525" class="g">!Ref</text><text x="21.042" y="12.525" class="g">AppName</text><text x="10.02" y="14.696" class="g">Image:</text><text x="17.034" y="14.696" class="g">!Ref</text><text x="22.044" y="14.696" class="g">ContainerImage</text><text x="10.02" y="16.867" class="g">PortMappings:</text><text x="12.024" y="19.038" class="g">-</text><text x="14.028" y="19.038" class="g">ContainerPort:</text><text x="29.058" y="19.038" class="g">!Ref</text><text x="34.068" y="19.038" class="g">ContainerPort</text><text x="10.02" y="21.209" class="g">#</text><text x="12.024" y="21.209" class="g">We</text><text x="15.03" y="21.209" class="g">pipe</text><text x="20.04" y="21.209" class="g">certain</text><text x="28.056" y="21.209" class="g">environment</text><text x="40.08" y="21.209" class="g">variables</text><text x="50.1" y="21.209" class="g">directly</text><text x="59.118" y="21.209" class="g">into</text><text x="64.128" y="21.209" class="g">the</text><text x="68.136" y="21.209" class="g">task</text><text x="73.146" y="21.209" class="g">definition.</text><text x="10.02" y="23.38" class="g">#</text><text x="12.024" y="23.38" class="g">This</text><text x="17.034" y="23.38" class="g">lets</text><text x="22.044" y="23.38" class="g">customers</text><text x="32.064" y="23.38" class="g">have</text><text x="37.074" y="23.38" class="g">access</text><text x="44.088" y="23.38" class="g">to,</text><text x="48.096" y="23.38" class="g">for</text><text x="52.104" y="23.38" class="g">example,</text><text x="61.122" y="23.38" class="g">their</text><text x="67.134" y="23.38" class="g">LB</text><text x="70.14" y="23.38" class="g">endpoint</text><text x="79.158" y="23.38" class="g">-</text><text x="81.162" y="23.38" class="g">which</text><text x="87.174" y="23.38" class="g">they&apos;d</text><text x="10.02" y="25.551" class="g">#</text><text x="12.024" y="25.551" class="g">have</text><text x="17.034" y="25.551" class="g">no</text><text x="20.04" y="25.551" class="g">way</text><text x="24.048" y="25.551" class="g">of</text><text x="27.054" y="25.551" class="g">otherwise</text><text x="37.074" y="25.551" class="g">determining.</text><text x="10.02" y="27.722" class="g">Environment:</text><text x="10.02" y="29.893" class="g">-</text><text x="12.024" y="29.893" class="g">Name:</text><text x="18.036" y="29.893" class="g">ECS_CLI_PROJECT_NAME</text><text x="12.024" y="32.064" class="g">Value:</text><text x="19.038" y="32.064" class="g">!Sub</text><text x="24.048" y="32.064" class="g">&apos;${ProjectName}&apos;</text><text x="10.02" y="34.235" class="g">-</text><text x="12.024" y="34.235" class="g">Name:</text><text x="18.036" y="34.235" class="g">ECS_APP_DISCOVERY_ENDPOINT</text><text x="12.024" y="36.406" class="g">Value:</text><text x="19.038" y="36.406" class="g">!Sub</text><text x="24.048" y="36.406" class="g">&apos;${ProjectName}.local&apos;</text><text x="10.02" y="38.577" class="g">-</text><text x="12.024" y="38.577" class="g">Name:</text><text x="18.036" y="38.577" class="g">ECS_CLI_ENVIRONMENT_NAME</text><text x="12.024" y="40.748" class="g">Value:</text><text x="19.038" y="40.748" class="g">!Sub</text><text x="24.048" y="40.748" class="g">&apos;${EnvName}&apos;</text><text x="10.02" y="42.919" class="g">-</text><text x="12.024" y="42.919" class="g">Name:</text><text x="18.036" y="42.919" class="g">ECS_CLI_APP_NAME</text><text x="12.024" y="45.09" class="g">Value:</text><text x="19.038" y="45.09" class="g">!Sub</text><text x="24.048" y="45.09" class="g">&apos;${AppName}&apos;</text><text x="10.02" y="47.261" class="g">-</text><text x="12.024" y="47.261" class="g">Name:</text><text x="18.036" y="47.261" class="g">ECS_CLI_LB_DNS</text><text x="12.024" y="49.432" class="g">Value:</text><text x="14.028" y="51.603" class="g">Fn::ImportValue:</text><text x="16.032" y="53.774" class="g">!Sub</text><text x="21.042" y="53.774" class="g">&quot;${ProjectName}-${EnvName}-PublicLoadBalancerDNS&quot;</text><text x="10.02" y="55.945" class="g">LogConfigura</text></svg><svg x="3939"><use xlink:href="#a"/><use xlink:href="#b" x="66.996" y="54.25"/><text x="14.028" y="1.67" class="g">awslogs-group:</text><text x="29.058" y="1.67" class="g">!Ref</text><text x="34.068" y="1.67" class="g">LogGroup</text><text x="14.028" y="3.841" class="g">awslogs-stream-prefix:</text><text x="37.074" y="3.841" class="g">ecs</text><text x="2.004" y="8.183" class="g">ExecutionRole:</text><use xlink:href="#13" y="8.684"/><use xlink:href="#11" y="10.855"/><use xlink:href="#14" y="13.026"/><use xlink:href="#15" y="15.197"/><use xlink:href="#16" y="17.368"/><use xlink:href="#17" y="19.539"/><use xlink:href="#18" y="21.71"/><use xlink:href="#19" y="23.881"/><use xlink:href="#20" y="26.052"/><text x="8.016" y="29.893" class="g">-</text><text x="10.02" y="29.893" class="g">PolicyName:</text><text x="22.044" y="29.893" class="g">!Join</text><text x="28.056" y="29.893" class="g">[&apos;&apos;,</text><text x="33.066" y="29.893" class="g">[!Ref</text><text x="39.078" y="29.893" class="g">ProjectName,</text><text x="52.104" y="29.893" class="g">&apos;-&apos;,</text><text x="57.114" y="29.893" class="g">!Ref</text><text x="62.124" y="29.893" class="g">EnvName,</text><text x="71.142" y="29.893" class="g">&apos;-&apos;,</text><text x="76.152" y="29.893" class="g">!Ref</text><text x="81.162" y="29.893" class="g">AppName,</text><text x="90.18" y="29.893" class="g">SecretsPoli</text><text y="32.064" class="g">cy]]</text><use xlink:href="#21" y="32.565"/><use xlink:href="#22" y="34.736"/><use xlink:href="#23" y="36.907"/><use xlink:href="#24" y="39.078"/><use xlink:href="#25" y="41.249"/><text x="18.036" y="45.09" class="g">-</text><text x="20.04" y="45.09" class="g">&apos;ssm:GetParameters&apos;</text><text x="18.036" y="47.261" class="g">-</text><text x="20.04" y="47.261" class="g">&apos;secretsmanager:GetSecretValue&apos;</text><text x="18.036" y="49.432" class="g">-</text><text x="20.04" y="49.432" class="g">&apos;kms:Decrypt&apos;</text><use xlink:href="#26" y="49.933"/><text x="18.036" y="53.774" class="g">-</text><text x="20.04" y="53.774" class="g">!Sub</text><text x="25.05" y="53.774" class="g">&apos;arn:aws:ssm:${AWS::Region}:${AWS::AccountId}:parameter/*&apos;</text><text x="18.036" y="55.945" class="g">-</text><text x="20.04" y="55.945" class="g">!Sub</text><text x="25.05" y="55.945" class="g">&apos;arn:aws:secretsmanager:${AWS::Region}:${A</text></svg><svg x="4040"><use xlink:href="#a"/><use xlink:href="#b" x="9.996" y="54.25"/><text x="2.004" y="3.841" class="g">TaskRole:</text><use xlink:href="#13" y="4.342"/><use xlink:href="#11" y="6.513"/><use xlink:href="#14" y="8.684"/><use xlink:href="#15" y="10.855"/><use xlink:href="#16" y="13.026"/><use xlink:href="#17" y="15.197"/><use xlink:href="#18" y="17.368"/><use xlink:href="#19" y="19.539"/><use xlink:href="#20" y="21.71"/><text x="8.016" y="25.551" class="g">-</text><text x="10.02" y="25.551" class="g">PolicyName:</text><text x="22.044" y="25.551" class="g">&apos;DenyIAMExceptTaggedRoles&apos;</text><use xlink:href="#21" y="26.052"/><use xlink:href="#22" y="28.223"/><use xlink:href="#23" y="30.394"/><text x="14.028" y="34.235" class="g">-</text><text x="16.032" y="34.235" class="g">Effect:</text><text x="24.048" y="34.235" class="g">&apos;Deny&apos;</text><text x="16.032" y="36.406" class="g">Action:</text><text x="24.048" y="36.406" class="g">&apos;iam:*&apos;</text><use xlink:href="#27" y="36.907"/><use xlink:href="#24" y="39.078"/><use xlink:href="#28" y="41.249"/><use xlink:href="#26" y="43.42"/><use xlink:href="#29" y="45.591"/><use xlink:href="#30" y="47.762"/><use xlink:href="#31" y="49.933"/><use xlink:href="#32" y="52.104"/></svg><svg x="4141"><use xlink:href="#a"/><use xlink:href="#b" x="32.996" y="54.25"/><use xlink:href="#28"/><use xlink:href="#26" y="2.171"/><use xlink:href="#29" y="4.342"/><use xlink:href="#30" y="6.513"/><use xlink:href="#31" y="8.684"/><use xlink:href="#32" y="10.855"/><text x="20.04" y="14.696" class="g">&apos;iam:ResourceTag/ecs-environment&apos;:</text><text x="55.11" y="14.696" class="g">!Sub</text><text x="60.12" y="14.696" class="g">&apos;${EnvName}&apos;</text><text x="8.016" y="16.867" class="g">-</text><text x="10.02" y="16.867" class="g">PolicyName:</text><text x="22.044" y="16.867" class="g">&apos;AllowPrefixedResources&apos;</text><use xlink:href="#21" y="17.368"/><use xlink:href="#22" y="19.539"/><use xlink:href="#23" y="21.71"/><use xlink:href="#24" y="23.881"/><use xlink:href="#33" y="26.052"/><use xlink:href="#26" y="28.223"/><text x="18.036" y="32.064" class="g">-</text><text x="20.04" y="32.064" class="g">!Sub</text><text x="25.05" y="32.064" class="g">&apos;arn:aws:s3:::${ProjectName}-${EnvName}-*&apos;</text><text x="18.036" y="34.235" class="g">-</text><text x="20.04" y="34.235" class="g">!Sub</text><text x="25.05" y="34.235" class="g">&apos;arn:aws:dynamodb:${AWS::Region}:${AWS::AccountId}:*/${ProjectName}-${EnvNam</text><use xlink:href="#34" y="34.736"/><text x="18.036" y="38.577" class="g">-</text><text x="20.04" y="38.577" class="g">!Sub</text><text x="25.05" y="38.577" class="g">&apos;arn:aws:elasticache:${AWS::Region}:${AWS::AccountId}:*/${ProjectName}-${Env</text><text y="40.748" class="g">Name}-*&apos;</text><text x="18.036" y="42.919" class="g">-</text><text x="20.04" y="42.919" class="g">!Sub</text><text x="25.05" y="42.919" class="g">&apos;arn:aws:redshift:${AWS::Region}:${AWS::AccountId}:*:${ProjectName}-${EnvNam</text><use xlink:href="#34" y="43.42"/><use xlink:href="#35" y="45.591"/><use xlink:href="#36" y="47.762"/><use xlink:href="#37" y="52.104"/><text x="18.036" y="55.945" class="g">-</text><text x="20.04" y="55.945" class="g">!Sub</text><text x="25.05" y="55.945" class="g">&apos;arn:aws</text></svg><svg x="4242"><use xlink:href="#a"/><use xlink:href="#b" x="19.996" y="54.25"/><use xlink:href="#35"/><use xlink:href="#36" y="2.171"/><use xlink:href="#37" y="6.513"/><text x="18.036" y="10.354" class="g">-</text><text x="20.04" y="10.354" class="g">!Sub</text><text x="25.05" y="10.354" class="g">&apos;arn:aws:sqs:${AWS::Region}:${AWS::AccountId}:${ProjectName}-${EnvName}-*&apos;</text><text x="18.036" y="12.525" class="g">-</text><text x="20.04" y="12.525" class="g">!Sub</text><text x="25.05" y="12.525" class="g">&apos;arn:aws:kinesis:${AWS::Region}:${AWS::AccountId}:*/${ProjectName}-${EnvName</text><text y="14.696" class="g">}-*&apos;</text><text x="18.036" y="16.867" class="g">-</text><text x="20.04" y="16.867" class="g">!Sub</text><text x="25.05" y="16.867" class="g">&apos;arn:aws:firehose:${AWS::Region}:${AWS::AccountId}:*/${ProjectName}-${EnvNam</text><use xlink:href="#34" y="17.368"/><text x="18.036" y="21.209" class="g">-</text><text x="20.04" y="21.209" class="g">!Sub</text><text x="25.05" y="21.209" class="g">&apos;arn:aws:kinesisanalytics:${AWS::Region}:${AWS::AccountId}:*/${ProjectName}-</text><text y="23.38" class="g">${EnvName}-*&apos;</text><text x="8.016" y="25.551" class="g">-</text><text x="10.02" y="25.551" class="g">PolicyName:</text><text x="22.044" y="25.551" class="g">&apos;AllowTaggedResources&apos;</text><text x="45.09" y="25.551" class="g">#</text><text x="47.094" y="25.551" class="g">See</text><text x="51.102" y="25.551" class="g">https://docs.aws.amazon.com/IAM/latest/UserGuide/r</text><text y="27.722" class="g">eference_policies_actions-resources-contextkeys.html</text><use xlink:href="#21" y="28.223"/><use xlink:href="#22" y="30.394"/><use xlink:href="#23" y="32.565"/><use xlink:href="#24" y="34.736"/><use xlink:href="#33" y="36.907"/><use xlink:href="#27" y="39.078"/><use xlink:href="#30" y="41.249"/><use xlink:href="#31" y="43.42"/><text x="20.04" y="47.261" class="g">&apos;aws:ResourceTag/ecs-project&apos;:</text><text x="51.102" y="47.261" class="g">!Sub</text><text x="56.112" y="47.261" class="g">&apos;${ProjectName}&apos;</text><text x="20.04" y="49.432" class="g">&apos;aws:ResourceTag/ecs-environment&apos;:</text><text x="55.11" y="49.432" class="g">!Sub</text><text x="60.12" y="49.432" class="g">&apos;${EnvName}&apos;</text><use xlink:href="#24" y="49.933"/><use xlink:href="#33" y="52.104"/><text x="16.032" y="55.945" class="g">Reso</text></svg><svg x="4343"><use xlink:href="#a"/><use xlink:href="#b" x="5.996" y="54.25"/><use xlink:href="#31"/><text x="20.04" y="3.841" class="g">&apos;secretsmanager:ResourceTag/ecs-project&apos;:</text><text x="62.124" y="3.841" class="g">!Sub</text><text x="67.134" y="3.841" class="g">&apos;${ProjectName}&apos;</text><text x="20.04" y="6.012" class="g">&apos;secretsmanager:ResourceTag/ecs-environment&apos;:</text><text x="66.132" y="6.012" class="g">!Sub</text><text x="71.142" y="6.012" class="g">&apos;${EnvName}&apos;</text><text x="8.016" y="8.183" class="g">-</text><text x="10.02" y="8.183" class="g">PolicyName:</text><text x="22.044" y="8.183" class="g">&apos;CloudWatchMetricsAndDashboard&apos;</text><use xlink:href="#21" y="8.684"/><use xlink:href="#22" y="10.855"/><use xlink:href="#23" y="13.026"/><use xlink:href="#24" y="15.197"/><use xlink:href="#25" y="17.368"/><text x="18.036" y="21.209" class="g">-</text><text x="20.04" y="21.209" class="g">&apos;cloudwatch:PutMetricData&apos;</text><use xlink:href="#27" y="21.71"/><use xlink:href="#24" y="23.881"/><use xlink:href="#25" y="26.052"/><text x="18.036" y="29.893" class="g">-</text><text x="20.04" y="29.893" class="g">&apos;cloudwatch:GetDashboard&apos;</text><text x="18.036" y="32.064" class="g">-</text><text x="20.04" y="32.064" class="g">&apos;cloudwatch:ListDashboards&apos;</text><text x="18.036" y="34.235" class="g">-</text><text x="20.04" y="34.235" class="g">&apos;cloudwatch:PutDashboard&apos;</text><text x="18.036" y="36.406" class="g">-</text><text x="20.04" y="36.406" class="g">&apos;cloudwatch:ListMetrics&apos;</text><use xlink:href="#27" y="36.907"/><text x="2.004" y="40.748" class="g">DiscoveryService:</text><text x="4.008" y="42.919" class="g">Type:</text><text x="10.02" y="42.919" class="g">AWS::ServiceDiscovery::Service</text><use xlink:href="#11" y="43.42"/><text x="6.012" y="47.261" class="g">Description:</text><text x="19.038" y="47.261" class="g">Discovery</text><text x="29.058" y="47.261" class="g">Service</text><text x="37.074" y="47.261" class="g">for</text><text x="41.082" y="47.261" class="g">the</text><text x="45.09" y="47.261" class="g">ECS</text><text x="49.098" y="47.261" class="g">CLI</text><text x="53.106" y="47.261" class="g">V2</text><text x="56.112" y="47.261" class="g">services</text><text x="6.012" y="49.432" class="g">DnsConfig:</text><text x="8.016" y="51.603" class="g">RoutingPolicy:</text><text x="23.046" y="51.603" class="g">MULTIVALUE</text><text x="8.016" y="53.774" class="g">DnsRecords:</text></svg><svg x="4444"><use xlink:href="#a"/><use xlink:href="#b" x=".996" y="54.25"/><use xlink:href="#38"/><text x="10.02" y="3.841" class="g">!Sub</text><text x="15.03" y="3.841" class="g">&apos;${ProjectName}-${EnvName}-ServiceDiscoveryNamespaceID&apos;</text><text x="2.004" y="6.012" class="g">Service:</text><text x="4.008" y="8.183" class="g">Type:</text><text x="10.02" y="8.183" class="g">AWS::ECS::Service</text><text x="4.008" y="10.354" class="g">DependsOn:</text><text x="15.03" y="10.354" class="g">WaitUntilListenerRuleIsCreated</text><use xlink:href="#11" y="10.855"/><text x="6.012" y="14.696" class="g">Cluster:</text><use xlink:href="#38" y="15.197"/><text x="10.02" y="19.038" class="g">!Sub</text><text x="15.03" y="19.038" class="g">&apos;${ProjectName}-${EnvName}-ClusterId&apos;</text><text x="6.012" y="21.209" class="g">TaskDefinition:</text><text x="22.044" y="21.209" class="g">!Ref</text><text x="27.054" y="21.209" class="g">TaskDefinition</text><text x="6.012" y="23.38" class="g">DeploymentConfiguration:</text><text x="8.016" y="25.551" class="g">MinimumHealthyPercent:</text><text x="31.062" y="25.551" class="g">100</text><text x="8.016" y="27.722" class="g">MaximumPercent:</text><text x="24.048" y="27.722" class="g">200</text><text x="6.012" y="29.893" class="g">DesiredCount:</text><text x="20.04" y="29.893" class="g">!Ref</text><text x="25.05" y="29.893" class="g">TaskCount</text><text x="6.012" y="32.064" class="g">#</text><text x="8.016" y="32.064" class="g">This</text><text x="13.026" y="32.064" class="g">may</text><text x="17.034" y="32.064" class="g">need</text><text x="22.044" y="32.064" class="g">to</text><text x="25.05" y="32.064" class="g">be</text><text x="28.056" y="32.064" class="g">adjusted</text><text x="37.074" y="32.064" class="g">if</text><text x="40.08" y="32.064" class="g">the</text><text x="44.088" y="32.064" class="g">container</text><text x="54.108" y="32.064" class="g">takes</text><text x="60.12" y="32.064" class="g">a</text><text x="62.124" y="32.064" class="g">while</text><text x="68.136" y="32.064" class="g">to</text><text x="71.142" y="32.064" class="g">start</text><text x="77.154" y="32.064" class="g">up</text><text x="6.012" y="34.235" class="g">HealthCheckGracePeriodSeconds:</text><text x="37.074" y="34.235" class="g">60</text><text x="6.012" y="36.406" class="g">LaunchType:</text><text x="18.036" y="36.406" class="g">FARGATE</text><text x="6.012" y="38.577" class="g">NetworkConfiguration:</text><text x="8.016" y="40.748" class="g">AwsvpcConfiguration:</text><text x="10.02" y="42.919" class="g">AssignPublicIp:</text><text x="26.052" y="42.919" class="g">ENABLED</text><text x="10.02" y="45.09" class="g">Subnets:</text><use xlink:href="#39" y="45.591"/><text x="14.028" y="49.432" class="g">-</text><text x="16.032" y="49.432" class="g">0</text><use xlink:href="#40" y="49.933"/><use xlink:href="#41" y="52.104"/></svg><svg x="4545"><use xlink:href="#a"/><use xlink:href="#b" x="37.996" y="54.25"/><use xlink:href="#41"/><use xlink:href="#42" y="2.171"/><use xlink:href="#39" y="4.342"/><text x="14.028" y="8.183" class="g">-</text><text x="16.032" y="8.183" class="g">1</text><use xlink:href="#40" y="8.684"/><use xlink:href="#41" y="10.855"/><use xlink:href="#42" y="13.026"/><text x="10.02" y="16.867" class="g">SecurityGroups:</text><text x="12.024" y="19.038" class="g">-</text><text x="14.028" y="19.038" class="g">Fn::ImportValue:</text><text x="31.062" y="19.038" class="g">!Sub</text><text x="36.072" y="19.038" class="g">&apos;${ProjectName}-${EnvName}-EnvironmentSecurityGroup&apos;</text><text x="6.012" y="21.209" class="g">LoadBalancers:</text><text x="8.016" y="23.38" class="g">-</text><text x="10.02" y="23.38" class="g">ContainerName:</text><text x="25.05" y="23.38" class="g">!Ref</text><text x="30.06" y="23.38" class="g">AppName</text><text x="10.02" y="25.551" class="g">ContainerPort:</text><text x="25.05" y="25.551" class="g">!Ref</text><text x="30.06" y="25.551" class="g">ContainerPort</text><text x="10.02" y="27.722" class="g">TargetGroupArn:</text><text x="26.052" y="27.722" class="g">!Ref</text><text x="31.062" y="27.722" class="g">TargetGroup</text><text x="6.012" y="29.893" class="g">ServiceRegistries:</text><text x="8.016" y="32.064" class="g">-</text><text x="10.02" y="32.064" class="g">RegistryArn:</text><text x="23.046" y="32.064" class="g">!GetAtt</text><text x="31.062" y="32.064" class="g">DiscoveryService.Arn</text><text x="10.02" y="34.235" class="g">Port:</text><text x="16.032" y="34.235" class="g">!Ref</text><text x="21.042" y="34.235" class="g">ContainerPort</text><text x="2.004" y="38.577" class="g">TargetGroup:</text><text x="4.008" y="40.748" class="g">Type:</text><text x="10.02" y="40.748" class="g">AWS::ElasticLoadBalancingV2::TargetGroup</text><use xlink:href="#11" y="41.249"/><text x="6.012" y="45.09" class="g">#</text><text x="9.018" y="45.09" class="g">Check</text><text x="15.03" y="45.09" class="g">if</text><text x="18.036" y="45.09" class="g">your</text><text x="23.046" y="45.09" class="g">application</text><text x="35.07" y="45.09" class="g">is</text><text x="38.076" y="45.09" class="g">healthy</text><text x="46.092" y="45.09" class="g">within</text><text x="53.106" y="45.09" class="g">20</text><text x="56.112" y="45.09" class="g">=</text><text x="58.116" y="45.09" class="g">10*2</text><text x="63.126" y="45.09" class="g">seconds,</text><text x="72.144" y="45.09" class="g">compared</text><text x="81.162" y="45.09" class="g">to</text><text x="84.168" y="45.09" class="g">2.5</text><text x="88.176" y="45.09" class="g">mins</text><text x="93.186" y="45.09" class="g">=</text><text x="95.19" y="45.09" class="g">30*5</text><text x="100.2" y="45.09" class="g">s</text><text y="47.261" class="g">econds.</text><text x="6.012" y="49.432" class="g">HealthCheckIntervalSeconds:</text><text x="34.068" y="49.432" class="g">10</text><text x="37.074" y="49.432" class="g">#</text><text x="39.078" y="49.432" class="g">Default</text><text x="47.094" y="49.432" class="g">is</text><text x="50.1" y="49.432" class="g">30.</text><text x="6.012" y="51.603" class="g">HealthyThresholdCount:</text><text x="29.058" y="51.603" class="g">2</text><text x="37.074" y="51.603" class="g">#</text><text x="39.078" y="51.603" class="g">Default</text><text x="47.094" y="51.603" class="g">is</text><text x="50.1" y="51.603" class="g">5.</text><text x="6.012" y="53.774" class="g">HealthCheckTimeoutSeconds:</text><text x="33.066" y="53.774" class="g">5</text><text x="6.012" y="55.945" class="g">HealthCheckPath:</text><text x="23.046" y="55.945" class="g">!Ref</text><text x="28.056" y="55.945" class="g">HealthChec</text></svg><svg x="4646"><use xlink:href="#a"/><use xlink:href="#b" x=".996" y="54.25"/><text x="10.02" y="1.67" class="g">!Sub</text><text x="15.03" y="1.67" class="g">&quot;${ProjectName}-${EnvName}-VpcId&quot;</text><text x="2.004" y="6.012" class="g">LoadBalancerDNSAlias:</text><text x="4.008" y="8.183" class="g">Type:</text><text x="10.02" y="8.183" class="g">AWS::Route53::RecordSetGroup</text><use xlink:href="#43" y="8.684"/><use xlink:href="#11" y="10.855"/><text x="6.012" y="14.696" class="g">HostedZoneId:</text><use xlink:href="#38" y="15.197"/><text x="10.02" y="19.038" class="g">!Sub</text><text x="15.03" y="19.038" class="g">&quot;${ProjectName}-${EnvName}-HostedZone&quot;</text><text x="6.012" y="21.209" class="g">Comment:</text><text x="15.03" y="21.209" class="g">!Sub</text><text x="20.04" y="21.209" class="g">&quot;LoadBalancer</text><text x="34.068" y="21.209" class="g">alias</text><text x="40.08" y="21.209" class="g">for</text><text x="44.088" y="21.209" class="g">app</text><text x="48.096" y="21.209" class="g">${AppName}&quot;</text><text x="6.012" y="23.38" class="g">RecordSets:</text><text x="6.012" y="25.551" class="g">-</text><text x="8.016" y="25.551" class="g">Name:</text><text x="10.02" y="27.722" class="g">!Join</text><text x="12.024" y="29.893" class="g">-</text><text x="14.028" y="29.893" class="g">&apos;.&apos;</text><text x="12.024" y="32.064" class="g">-</text><text x="14.028" y="32.064" class="g">-</text><text x="16.032" y="32.064" class="g">!Ref</text><text x="21.042" y="32.064" class="g">AppName</text><use xlink:href="#44" y="32.565"/><use xlink:href="#45" y="34.736"/><use xlink:href="#46" y="36.907"/><use xlink:href="#47" y="39.078"/><use xlink:href="#48" y="41.249"/><use xlink:href="#49" y="43.42"/><use xlink:href="#50" y="45.591"/><use xlink:href="#51" y="47.762"/><use xlink:href="#52" y="49.933"/><use xlink:href="#50" y="52.104"/></svg><svg x="4747"><use xlink:href="#a"/><use xlink:href="#b" x="36.996" y="54.25"/><use xlink:href="#44"/><use xlink:href="#45" y="2.171"/><use xlink:href="#46" y="4.342"/><use xlink:href="#47" y="6.513"/><use xlink:href="#48" y="8.684"/><use xlink:href="#49" y="10.855"/><use xlink:href="#50" y="13.026"/><use xlink:href="#51" y="15.197"/><use xlink:href="#52" y="17.368"/><use xlink:href="#50" y="19.539"/><text x="14.028" y="23.38" class="g">!Sub</text><text x="19.038" y="23.38" class="g">&quot;${ProjectName}-${EnvName}-PublicLoadBalancerDNS&quot;</text><text x="2.004" y="27.722" class="g">RulePriorityFunction:</text><text x="4.008" y="29.893" class="g">Type:</text><text x="10.02" y="29.893" class="g">AWS::Lambda::Function</text><use xlink:href="#11" y="30.394"/><text x="6.012" y="34.235" class="g">Code:</text><text x="8.016" y="36.406" class="g">ZipFile:</text><text x="17.034" y="36.406" class="g">|</text><use xlink:href="#53" y="36.907"/><use xlink:href="#54" y="39.078"/><use xlink:href="#55" y="41.249"/><use xlink:href="#56" y="43.42"/><use xlink:href="#57" y="45.591"/><use xlink:href="#58" y="47.762"/><use xlink:href="#59" y="49.933"/><use xlink:href="#60" y="52.104"/><text y="55.945" class="g">es({ListenerArn:a,Marker:b}).promise(</text></svg><svg x="4848"><use xlink:href="#a"/><use xlink:href="#b" x="24.996" y="54.25"/><use xlink:href="#53"/><use xlink:href="#54" y="2.171"/><use xlink:href="#55" y="4.342"/><use xlink:href="#56" y="6.513"/><use xlink:href="#57" y="8.684"/><use xlink:href="#58" y="10.855"/><use xlink:href="#59" y="13.026"/><use xlink:href="#60" y="15.197"/><text y="19.038" class="g">es({ListenerArn:a,Marker:b}).promise();d=d.concat(e.Rules),b=e.NextMarker}while(b);let</text><text x="87.174" y="19.038" class="g">e=1;if(0&lt;d.len</text><text y="21.209" class="g">gth){const</text><text x="11.022" y="21.209" class="g">a=d.map(a=&gt;&quot;default&quot;===a.Priority||a.Priority===priorityForRootRule?0:parseInt(a.Priority)</text><text y="23.38" class="g">),b=Math.max(...a);e=b+1}return</text><text x="32.064" y="23.38" class="g">e};exports.nextAvailableRulePriorityHandler=async</text><text x="82.164" y="23.38" class="g">function(a,b){var</text><text x="100.2" y="23.38" class="g">c</text><text y="25.551" class="g">,d,e={};try{switch(a.RequestType){case&quot;Create&quot;:d=await</text><text x="55.11" y="25.551" class="g">calculateNextRulePriority(a.ResourceProperties</text><text y="27.722" class="g">.ListenerArn),e.Priority=d,c=`alb-rule-priority-${a.LogicalResourceId}`;break;case&quot;Update&quot;:case&quot;Delet</text><text y="29.893" class="g">e&quot;:c=a.PhysicalResourceId;break;default:throw</text><text x="46.092" y="29.893" class="g">new</text><text x="50.1" y="29.893" class="g">Error(`Unsupported</text><text x="69.138" y="29.893" class="g">request</text><text x="77.154" y="29.893" class="g">type</text><text x="82.164" y="29.893" class="g">${a.RequestType}`);</text><text y="32.064" class="g">}await</text><text x="7.014" y="32.064" class="g">report(a,b,&quot;SUCCESS&quot;,c,e)}catch(d){console.log(`Caught</text><text x="62.124" y="32.064" class="g">error</text><text x="68.136" y="32.064" class="g">${d}.`),await</text><text x="82.164" y="32.064" class="g">report(a,b,&quot;FAILED&quot;</text><text y="34.235" class="g">,c,null,d.message)}},exports.withDefaultResponseURL=function(a){defaultResponseURL=a};</text><text x="6.012" y="36.406" class="g">Handler:</text><text x="15.03" y="36.406" class="g">&quot;index.nextAvailableRulePriorityHandler&quot;</text><text x="6.012" y="38.577" class="g">Timeout:</text><text x="15.03" y="38.577" class="g">600</text><text x="6.012" y="40.748" class="g">MemorySize:</text><text x="18.036" y="40.748" class="g">512</text><text x="6.012" y="42.919" class="g">Role:</text><text x="12.024" y="42.919" class="g">!GetAtt</text><text x="20.04" y="42.919" class="g">&apos;CustomResourceRole.Arn&apos;</text><text x="6.012" y="45.09" class="g">Runtime:</text><text x="15.03" y="45.09" class="g">nodejs10.x</text><text x="2.004" y="49.432" class="g">CustomResourceRole:</text><use xlink:href="#13" y="49.933"/><use xlink:href="#11" y="52.104"/><text x="6.012" y="55.945" class="g">AssumeRolePolicyDoc</text></svg><svg x="4949"><use xlink:href="#a"/><use xlink:href="#b" x="30.996" y="54.25"/><text x="14.028" y="1.67" class="g">-</text><text x="16.032" y="1.67" class="g">sts:AssumeRole</text><text x="6.012" y="3.841" class="g">Path:</text><text x="12.024" y="3.841" class="g">/</text><use xlink:href="#20" y="4.342"/><text x="8.016" y="8.183" class="g">-</text><text x="10.02" y="8.183" class="g">PolicyName:</text><text x="22.044" y="8.183" class="g">&quot;DNSandACMAccess&quot;</text><use xlink:href="#21" y="8.684"/><use xlink:href="#22" y="10.855"/><use xlink:href="#23" y="13.026"/><text x="12.024" y="16.867" class="g">-</text><text x="14.028" y="16.867" class="g">Effect:</text><text x="22.044" y="16.867" class="g">Allow</text><text x="14.028" y="19.038" class="g">Action:</text><text x="16.032" y="21.209" class="g">-</text><text x="18.036" y="21.209" class="g">elasticloadbalancing:DescribeRules</text><text x="14.028" y="23.38" class="g">Resource:</text><text x="24.048" y="23.38" class="g">&quot;*&quot;</text><text x="6.012" y="25.551" class="g">ManagedPolicyArns:</text><text x="8.016" y="27.722" class="g">-</text><text x="10.02" y="27.722" class="g">arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole</text><text x="2.004" y="32.064" class="g">HTTPSRulePriorityAction:</text><use xlink:href="#43" y="32.565"/><use xlink:href="#61" y="34.736"/><use xlink:href="#11" y="36.907"/><use xlink:href="#62" y="39.078"/><use xlink:href="#63" y="41.249"/><use xlink:href="#38" y="43.42"/><use xlink:href="#64" y="45.591"/><text x="2.004" y="51.603" class="g">HTTPSListenerRule:</text><use xlink:href="#65" y="52.104"/><text x="4.008" y="55.945" class="g">Condition:</text><text x="15.03" y="55.945" class="g">HTTPSLoadBalance</text></svg><svg x="5050"><use xlink:href="#a"/><use xlink:href="#b" x="-.004" y="54.25"/><text x="14.028" y="1.67" class="g">-</text><text x="16.032" y="1.67" class="g">Fn::Join:</text><text x="16.032" y="3.841" class="g">-</text><text x="18.036" y="3.841" class="g">&apos;.&apos;</text><text x="16.032" y="6.012" class="g">-</text><text x="18.036" y="6.012" class="g">-</text><text x="20.04" y="6.012" class="g">!Ref</text><text x="25.05" y="6.012" class="g">AppName</text><text x="18.036" y="8.183" class="g">-</text><text x="20.04" y="8.183" class="g">Fn::ImportValue:</text><text x="22.044" y="10.354" class="g">!Sub</text><text x="27.054" y="10.354" class="g">&quot;${ProjectName}-${EnvName}-SubDomain&quot;</text><use xlink:href="#63" y="10.855"/><use xlink:href="#38" y="13.026"/><use xlink:href="#64" y="15.197"/><text x="6.012" y="19.038" class="g">Priority:</text><text x="16.032" y="19.038" class="g">!GetAtt</text><text x="24.048" y="19.038" class="g">HTTPSRulePriorityAction.Priority</text><text x="2.004" y="23.38" class="g">HTTPRulePriorityAction:</text><use xlink:href="#66" y="23.881"/><use xlink:href="#61" y="26.052"/><use xlink:href="#11" y="28.223"/><use xlink:href="#62" y="30.394"/><use xlink:href="#63" y="32.565"/><use xlink:href="#38" y="34.736"/><use xlink:href="#67" y="36.907"/><text x="2.004" y="42.919" class="g">HTTPListenerRule:</text><use xlink:href="#65" y="43.42"/><use xlink:href="#66" y="45.591"/><use xlink:href="#11" y="47.762"/><text x="6.012" y="51.603" class="g">Actions:</text><text x="8.016" y="53.774" class="g">-</text><text x="10.02" y="53.774" class="g">TargetGroupArn:</text><text x="26.052" y="53.774" class="g">!Ref</text><text x="31.062" y="53.774" class="g">TargetGroup</text></svg><svg x="5151"><use xlink:href="#a"/><use xlink:href="#b" x="54.996" y="54.25"/><text x="6.012" y="1.67" class="g">Conditions:</text><text x="8.016" y="3.841" class="g">-</text><text x="10.02" y="3.841" class="g">Field:</text><text x="17.034" y="3.841" class="g">&apos;path-pattern&apos;</text><text x="10.02" y="6.012" class="g">PathPatternConfig:</text><text x="12.024" y="8.183" class="g">Values:</text><text x="14.028" y="10.354" class="g">!If</text><text x="16.032" y="12.525" class="g">-</text><text x="18.036" y="12.525" class="g">HTTPRootPath</text><use xlink:href="#68" y="13.026"/><text x="18.036" y="16.867" class="g">-</text><text x="20.04" y="16.867" class="g">&quot;/*&quot;</text><use xlink:href="#68" y="17.368"/><text x="18.036" y="21.209" class="g">-</text><text x="20.04" y="21.209" class="g">!Sub</text><text x="25.05" y="21.209" class="g">&quot;/${RulePath}&quot;</text><text x="18.036" y="23.38" class="g">-</text><text x="20.04" y="23.38" class="g">!Sub</text><text x="25.05" y="23.38" class="g">&quot;/${RulePath}/*&quot;</text><use xlink:href="#63" y="23.881"/><use xlink:href="#38" y="26.052"/><use xlink:href="#67" y="28.223"/><text x="6.012" y="32.064" class="g">Priority:</text><text x="8.016" y="34.235" class="g">!If</text><text x="10.02" y="36.406" class="g">-</text><text x="12.024" y="36.406" class="g">HTTPRootPath</text><text x="10.02" y="38.577" class="g">-</text><text x="12.024" y="38.577" class="g">50000</text><text x="18.036" y="38.577" class="g">#</text><text x="20.04" y="38.577" class="g">This</text><text x="25.05" y="38.577" class="g">is</text><text x="28.056" y="38.577" class="g">the</text><text x="32.064" y="38.577" class="g">max</text><text x="36.072" y="38.577" class="g">rule</text><text x="41.082" y="38.577" class="g">priority.</text><text x="51.102" y="38.577" class="g">Since</text><text x="57.114" y="38.577" class="g">this</text><text x="62.124" y="38.577" class="g">rule</text><text x="67.134" y="38.577" class="g">evaluates</text><text x="77.154" y="38.577" class="g">true</text><text x="82.164" y="38.577" class="g">for</text><text x="86.172" y="38.577" class="g">everything,</text><text x="98.196" y="38.577" class="g">we</text><text y="40.748" class="g">make</text><text x="5.01" y="40.748" class="g">sure</text><text x="10.02" y="40.748" class="g">it</text><text x="13.026" y="40.748" class="g">is</text><text x="16.032" y="40.748" class="g">last</text><text x="10.02" y="42.919" class="g">-</text><text x="12.024" y="42.919" class="g">!GetAtt</text><text x="20.04" y="42.919" class="g">HTTPRulePriorityAction.Priority</text><text x="2.004" y="47.261" class="g">#</text><text x="4.008" y="47.261" class="g">Force</text><text x="10.02" y="47.261" class="g">a</text><text x="12.024" y="47.261" class="g">conditional</text><text x="24.048" y="47.261" class="g">dependency</text><text x="35.07" y="47.261" class="g">from</text><text x="40.08" y="47.261" class="g">the</text><text x="44.088" y="47.261" class="g">ECS</text><text x="48.096" y="47.261" class="g">service</text><text x="56.112" y="47.261" class="g">on</text><text x="59.118" y="47.261" class="g">the</text><text x="63.126" y="47.261" class="g">listener</text><text x="72.144" y="47.261" class="g">rules.</text><text x="2.004" y="49.432" class="g">#</text><text x="4.008" y="49.432" class="g">Our</text><text x="8.016" y="49.432" class="g">service</text><text x="16.032" y="49.432" class="g">depends</text><text x="24.048" y="49.432" class="g">on</text><text x="27.054" y="49.432" class="g">our</text><text x="31.062" y="49.432" class="g">HTTP/S</text><text x="38.076" y="49.432" class="g">listener</text><text x="47.094" y="49.432" class="g">to</text><text x="50.1" y="49.432" class="g">be</text><text x="53.106" y="49.432" class="g">set</text><text x="57.114" y="49.432" class="g">up</text><text x="60.12" y="49.432" class="g">before</text><text x="67.134" y="49.432" class="g">it</text><text x="70.14" y="49.432" class="g">can</text><text x="2.004" y="51.603" class="g">#</text><text x="4.008" y="51.603" class="g">be</text><text x="7.014" y="51.603" class="g">created.</text><text x="16.032" y="51.603" class="g">But,</text><text x="21.042" y="51.603" class="g">since</text><text x="27.054" y="51.603" class="g">our</text><text x="31.062" y="51.603" class="g">environment</text><text x="43.086" y="51.603" class="g">is</text><text x="46.092" y="51.603" class="g">either</text><text x="53.106" y="51.603" class="g">HTTPS</text><text x="59.118" y="51.603" class="g">or</text><text x="62.124" y="51.603" class="g">not,</text><text x="67.134" y="51.603" class="g">we</text><text x="2.004" y="53.774" class="g">#</text><text x="4.008" y="53.774" class="g">have</text><text x="9.018" y="53.774" class="g">a</text><text x="11.022" y="53.774" class="g">conditional</text><text x="23.046" y="53.774" class="g">dependency</text><text x="34.068" y="53.774" class="g">(we</text><text x="38.076" y="53.774" class="g">have</text><text x="43.086" y="53.774" class="g">to</text><text x="46.092" y="53.774" class="g">wait</text><text x="51.102" y="53.774" class="g">for</text><text x="55.11" y="53.774" class="g">the</text><text x="59.118" y="53.774" class="g">HTTPS</text><text x="65.13" y="53.774" class="g">listener</text><text x="2.004" y="55.945" class="g">#</text><text x="4.008" y="55.945" class="g">to</text><text x="7.014" y="55.945" class="g">be</text><text x="10.02" y="55.945" class="g">created</text><text x="18.036" y="55.945" class="g">or</text><text x="21.042" y="55.945" class="g">the</text><text x="25.05" y="55.945" class="g">HTTP</text><text x="30.06" y="55.945" class="g">listener</text><text x="39.078" y="55.945" class="g">to</text><text x="42.084" y="55.945" class="g">be</text><text x="45.09" y="55.945" class="g">created).</text></svg><svg x="5252"><use xlink:href="#a"/><use xlink:href="#b" x="7.996" y="54.25"/><text x="2.004" y="1.67" class="g">#</text><text x="4.008" y="1.67" class="g">conditional</text><text x="16.032" y="1.67" class="g">dependency,</text><text x="28.056" y="1.67" class="g">we</text><text x="31.062" y="1.67" class="g">use</text><text x="35.07" y="1.67" class="g">the</text><text x="39.078" y="1.67" class="g">WaitHandle</text><text x="50.1" y="1.67" class="g">resource</text><text x="59.118" y="1.67" class="g">as</text><text x="62.124" y="1.67" class="g">a</text><text x="64.128" y="1.67" class="g">way</text><text x="68.136" y="1.67" class="g">to</text><text x="71.142" y="1.67" class="g">force</text><text x="2.004" y="3.841" class="g">#</text><text x="4.008" y="3.841" class="g">a</text><text x="6.012" y="3.841" class="g">single</text><text x="13.026" y="3.841" class="g">dependency.</text><text x="25.05" y="3.841" class="g">The</text><text x="29.058" y="3.841" class="g">Ref</text><text x="33.066" y="3.841" class="g">in</text><text x="36.072" y="3.841" class="g">the</text><text x="40.08" y="3.841" class="g">WaitCondition</text><text x="54.108" y="3.841" class="g">implicitly</text><text x="65.13" y="3.841" class="g">creates</text><text x="73.146" y="3.841" class="g">a</text><text x="75.15" y="3.841" class="g">conditional</text><text x="2.004" y="6.012" class="g">#</text><text x="4.008" y="6.012" class="g">dependency</text><text x="15.03" y="6.012" class="g">-</text><text x="17.034" y="6.012" class="g">if</text><text x="20.04" y="6.012" class="g">the</text><text x="24.048" y="6.012" class="g">condition</text><text x="34.068" y="6.012" class="g">is</text><text x="37.074" y="6.012" class="g">satisfied</text><text x="47.094" y="6.012" class="g">(HTTPLoadBalancer)</text><text x="66.132" y="6.012" class="g">-</text><text x="68.136" y="6.012" class="g">the</text><text x="72.144" y="6.012" class="g">ref</text><text x="76.152" y="6.012" class="g">resolves</text><text x="2.004" y="8.183" class="g">#</text><text x="4.008" y="8.183" class="g">the</text><text x="8.016" y="8.183" class="g">HTTPWaitHandle,</text><text x="24.048" y="8.183" class="g">which</text><text x="30.06" y="8.183" class="g">depends</text><text x="38.076" y="8.183" class="g">on</text><text x="41.082" y="8.183" class="g">the</text><text x="45.09" y="8.183" class="g">HTTPListenerRule.</text><text x="2.004" y="12.525" class="g">HTTPSWaitHandle:</text><use xlink:href="#43" y="13.026"/><text x="4.008" y="16.867" class="g">DependsOn:</text><text x="15.03" y="16.867" class="g">HTTPSListenerRule</text><use xlink:href="#69" y="17.368"/><use xlink:href="#70" y="21.71"/><use xlink:href="#66" y="23.881"/><use xlink:href="#71" y="26.052"/><use xlink:href="#69" y="28.223"/><use xlink:href="#72" y="32.565"/><use xlink:href="#73" y="34.736"/><use xlink:href="#74" y="36.907"/><use xlink:href="#75" y="39.078"/><use xlink:href="#76" y="41.249"/><use xlink:href="#11" y="43.42"/><use xlink:href="#77" y="45.591"/><use xlink:href="#78" y="47.762"/><use xlink:href="#79" y="49.933"/><text x="2.004" y="55.945" class="g">Addons</text></svg><svg x="5353"><use xlink:href="#a"/><use xlink:href="#b" x="-.004" y="54.25"/><use xlink:href="#70"/><use xlink:href="#66" y="2.171"/><use xlink:href="#71" y="4.342"/><use xlink:href="#69" y="6.513"/><use xlink:href="#72" y="10.855"/><use xlink:href="#73" y="13.026"/><use xlink:href="#74" y="15.197"/><use xlink:href="#75" y="17.368"/><use xlink:href="#76" y="19.539"/><use xlink:href="#11" y="21.71"/><use xlink:href="#77" y="23.881"/><use xlink:href="#78" y="26.052"/><use xlink:href="#79" y="28.223"/><use xlink:href="#80" y="32.565"/><use xlink:href="#81" y="34.736"/><use xlink:href="#82" y="36.907"/><use xlink:href="#11" y="39.078"/><use xlink:href="#83" y="41.249"/><use xlink:href="#84" y="43.42"/><use xlink:href="#85" y="45.591"/><use xlink:href="#86" y="47.762"/><use xlink:href="#87" y="49.933"/><use xlink:href="#88" y="52.104"/></svg><svg x="5454"><use xlink:href="#a"/><use xlink:href="#b" x="-.004" y="54.25"/><use xlink:href="#70"/><use xlink:href="#66" y="2.171"/><use xlink:href="#71" y="4.342"/><use xlink:href="#69" y="6.513"/><use xlink:href="#72" y="10.855"/><use xlink:href="#73" y="13.026"/><use xlink:href="#74" y="15.197"/><use xlink:href="#75" y="17.368"/><use xlink:href="#76" y="19.539"/><use xlink:href="#11" y="21.71"/><use xlink:href="#77" y="23.881"/><use xlink:href="#78" y="26.052"/><use xlink:href="#79" y="28.223"/><use xlink:href="#80" y="32.565"/><use xlink:href="#81" y="34.736"/><use xlink:href="#82" y="36.907"/><use xlink:href="#11" y="39.078"/><use xlink:href="#83" y="41.249"/><use xlink:href="#84" y="43.42"/><use xlink:href="#85" y="45.591"/><use xlink:href="#86" y="47.762"/><use xlink:href="#87" y="49.933"/><use xlink:href="#88" y="52.104"/></svg><svg x="5555"><use xlink:href="#a"/><use xlink:href="#b" x="-.004" y="54.25"/><use xlink:href="#70"/><use xlink:href="#66" y="2.171"/><use xlink:href="#71" y="4.342"/><use xlink:href="#69" y="6.513"/><use xlink:href="#72" y="10.855"/><use xlink:href="#73" y="13.026"/><use xlink:href="#74" y="15.197"/><use xlink:href="#75" y="17.368"/><use xlink:href="#76" y="19.539"/><use xlink:href="#11" y="21.71"/><use xlink:href="#77" y="23.881"/><use xlink:href="#78" y="26.052"/><use xlink:href="#79" y="28.223"/><use xlink:href="#80" y="32.565"/><use xlink:href="#81" y="34.736"/><use xlink:href="#82" y="36.907"/><use xlink:href="#11" y="39.078"/><use xlink:href="#83" y="41.249"/><use xlink:href="#84" y="43.42"/><use xlink:href="#85" y="45.591"/><use xlink:href="#86" y="47.762"/><use xlink:href="#87" y="49.933"/><use xlink:href="#88" y="52.104"/></svg><svg x="5656"><use xlink:href="#a"/><use xlink:href="#b" x="-.004" y="54.25"/><use xlink:href="#70"/><use xlink:href="#66" y="2.171"/><use xlink:href="#71" y="4.342"/><use xlink:href="#69" y="6.513"/><use xlink:href="#72" y="10.855"/><use xlink:href="#73" y="13.026"/><use xlink:href="#74" y="15.197"/><use xlink:href="#75" y="17.368"/><use xlink:href="#76" y="19.539"/><use xlink:href="#11" y="21.71"/><use xlink:href="#77" y="23.881"/><use xlink:href="#78" y="26.052"/><use xlink:href="#79" y="28.223"/><use xlink:href="#80" y="32.565"/><use xlink:href="#81" y="34.736"/><use xlink:href="#82" y="36.907"/><use xlink:href="#11" y="39.078"/><use xlink:href="#83" y="41.249"/><use xlink:href="#84" y="43.42"/><use xlink:href="#85" y="45.591"/><use xlink:href="#86" y="47.762"/><use xlink:href="#87" y="49.933"/><use xlink:href="#88" y="52.104"/></svg><svg x="5757"><use xlink:href="#a"/><use xlink:href="#b" x="9.996" y="54.25"/><use xlink:href="#70"/><use xlink:href="#66" y="2.171"/><use xlink:href="#71" y="4.342"/><use xlink:href="#69" y="6.513"/><use xlink:href="#72" y="10.855"/><use xlink:href="#73" y="13.026"/><use xlink:href="#74" y="15.197"/><use xlink:href="#75" y="17.368"/><use xlink:href="#76" y="19.539"/><use xlink:href="#11" y="21.71"/><use xlink:href="#77" y="23.881"/><use xlink:href="#78" y="26.052"/><use xlink:href="#79" y="28.223"/><use xlink:href="#80" y="32.565"/><use xlink:href="#81" y="34.736"/><use xlink:href="#82" y="36.907"/><use xlink:href="#11" y="39.078"/><use xlink:href="#83" y="41.249"/><use xlink:href="#84" y="43.42"/><use xlink:href="#85" y="45.591"/><use xlink:href="#86" y="47.762"/><use xlink:href="#87" y="49.933"/><use xlink:href="#88" y="52.104"/><use xlink:href="#1" y="54.275"/></svg><svg x="5858"><use xlink:href="#a"/><use xlink:href="#b" x="9.996" y="54.25"/><use xlink:href="#70"/><use xlink:href="#66" y="2.171"/><use xlink:href="#71" y="4.342"/><use xlink:href="#69" y="6.513"/><use xlink:href="#72" y="10.855"/><use xlink:href="#73" y="13.026"/><use xlink:href="#74" y="15.197"/><use xlink:href="#75" y="17.368"/><use xlink:href="#76" y="19.539"/><use xlink:href="#11" y="21.71"/><use xlink:href="#77" y="23.881"/><use xlink:href="#78" y="26.052"/><use xlink:href="#79" y="28.223"/><use xlink:href="#80" y="32.565"/><use xlink:href="#81" y="34.736"/><use xlink:href="#82" y="36.907"/><use xlink:href="#11" y="39.078"/><use xlink:href="#83" y="41.249"/><use xlink:href="#84" y="43.42"/><use xlink:href="#85" y="45.591"/><use xlink:href="#86" y="47.762"/><use xlink:href="#87" y="49.933"/><use xlink:href="#88" y="52.104"/><use xlink:href="#2" y="54.275"/></svg><svg x="5959"><use xlink:href="#a"/><use xlink:href="#b" x="-.004" y="54.25"/><use xlink:href="#66"/><use xlink:href="#71" y="2.171"/><use xlink:href="#69" y="4.342"/><use xlink:href="#72" y="8.684"/><use xlink:href="#73" y="10.855"/><use xlink:href="#74" y="13.026"/><use xlink:href="#75" y="15.197"/><use xlink:href="#76" y="17.368"/><use xlink:href="#11" y="19.539"/><use xlink:href="#77" y="21.71"/><use xlink:href="#78" y="23.881"/><use xlink:href="#79" y="26.052"/><use xlink:href="#80" y="30.394"/><use xlink:href="#81" y="32.565"/><use xlink:href="#82" y="34.736"/><use xlink:href="#11" y="36.907"/><use xlink:href="#83" y="39.078"/><use xlink:href="#84" y="41.249"/><use xlink:href="#85" y="43.42"/><use xlink:href="#86" y="45.591"/><use xlink:href="#87" y="47.762"/><use xlink:href="#88" y="49.933"/><use xlink:href="#2" y="52.104"/></svg></svg></g></g></svg></svg>